/* 
 * angular-autodisable 0.3.0
 * http://github.com/gardner/angular-autodisable
 * 
 * Licensed under the MIT license
 */
!function(h){"use strict";h.module("ngAutodisable",[]).directive("ngAutodisable",["$parse",function(t){var a="disabled",u="ngClick",s="submit",c="ngSubmit",e="ngAutodisableClass";function l(n,t,e,r){var i,o=r(t,{$event:e});(i=o)&&h.isFunction(i.then)&&n.handlePromise(o)}function f(n){return n.split(";").map(function(n){return t(n,null,!0)})}function b(n){return!!n.hasOwnProperty(e)&&n[e]}function d(t,n,e,r){var i={},o=0;function u(){0===--o&&h.forEach(t,function(n){n.attr(a,!1),e&&n.removeClass(e)})}return i.eventName=n,i.callbacks=r,i.handlePromise=function(n){0===o&&h.forEach(t,function(n){n.attr(a,!0),e&&n.addClass(e)}),o++,n.then(u,u)},i}return{restrict:"A",link:function(t,n,e){var r;if(e.hasOwnProperty(u))r=d([n],"click",b(e),f(e[u]));else{if(!e.hasOwnProperty(c))throw new Error("ngAutodisable requires ngClick or ngSubmit attribute in order to work");var i=n.find("button");if(0===i.length)throw new Error("ngAutodisable on a from requires buttons with 'type=\"submit\"'");var o=[];h.forEach(i,function(n){n.type===s&&o.push(h.element(n))}),r=d(o,s,b(e),f(e[c]))}n.unbind(r.eventName).bind(r.eventName,function(n){t.$apply(function(){r.callbacks.forEach(l.bind(null,r,t,n))})})}}}])}(angular);